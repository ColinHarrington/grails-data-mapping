
group = "org.grails.plugins"
version = "4.0.0.BUILD-SNAPSHOT"

apply from:'https://raw.githubusercontent.com/grails/grails-boot/master/gradle/maven-central-build.gradle'

configurations {
    provided
}

dependencies {


    provided("org.grails:grails-core:$grailsVersion")
    provided("org.grails:grails-plugin-converters:$grailsVersion")
    provided 'javax.servlet:javax.servlet-api:3.1.0'
    compile 'org.codehaus.groovy:groovy:2.3.7'

    compile project(":grails-datastore-gorm-mongodb"), {
        exclude group:'org.springframework', module:'spring-context'
        exclude group:'org.springframework', module:'spring-core'
        exclude group:'org.springframework', module:'spring-beans'
        exclude group:'org.springframework', module:'spring-tx'
        exclude group:'org.grails', module:'grails-bootstrap'
        exclude group:'org.codehaus.groovy', module:'groovy-all'
        exclude group:'org.grails', module:'grails-core'
        exclude group:'org.grails', module:'grails-async'
        exclude group:'javax.transaction', module:'jta'
    }
}

sourceSets {
    main {
        compileClasspath += configurations.provided
    }
    javadoc {
        classpath = configurations.compile + configurations.provided
    }
}

def installer = install.repositories.mavenInstaller
def deployer = uploadArchives.repositories.mavenDeployer

[installer, deployer]*.pom*.whenConfigured { pom ->
    pom.artifactId = 'mongodb'
}
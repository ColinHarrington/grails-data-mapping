<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>1.3 Upgrade Notes 5.0.1.RELEASE</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/objectMapping.html"><strong>3</strong><span>Mapping Domain Classes to MongoDB Collections</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/databaseSwitching.html"><strong>4</strong><span>Switching Database or Collection at Runtime</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/stateless.html"><strong>5</strong><span>Stateless Mode</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/lowLevelApi.html"><strong>6</strong><span>Using the MongoDB Driver Directly</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/transactions.html"><strong>7</strong><span>Transactions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>8</strong><span>Unit Testing</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p></p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span> >></a></div>
                


                <div class="project">
                    <h1>1.3 Upgrade Notes - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Graeme Rocher, Burt Beckwith</p>

                    <p><strong>Version:</strong> 5.0.1.RELEASE</p>

                    
                </div>

                

                

<h2 id="upgradeNotes">1.3 Upgrade Notes</h2>
<h4>Configuration Properties</h4><p class="paragraph"/>In previous versions of the plugin configuration was specified using the `grails.mongo` prefix. This is now `grails.mongodb` instead. For example, the following configuration in <code>application.groovy</code> or <code>Config.groovy</code>:<p class="paragraph"/><div class="code"><pre>grails &#123;
    mongo &#123;
        databaseName = 'foo'
    &#125;
&#125;</pre></div><p class="paragraph"/>Should now be expressed as:<p class="paragraph"/><div class="code"><pre>grails &#123;
    mongodb &#123;
        databaseName = 'foo'
    &#125;
&#125;</pre></div><p class="paragraph"/><h4>Persistence Engine</h4><p class="paragraph"/>Since GORM for MongoDB 5.0 there is now a choice of persistence engine. The original GORM for MongoDB converted MongoDB documents to and from Groovy objects. This engine is still present and can be activated with the following configuration in <code>grails-app/conf/application.yml</code>:<p class="paragraph"/><div class="code"><pre>grails:
    mongodb:
        engine: mapping</pre></div><p class="paragraph"/>However, 5.0 and above uses a new engine based on MongoDB 3.x driver codecs which means objects are no longer converted first to MongoDB Document objects and then to Groovy objects, instead the driver reads Groovy objects directly from the JSON stream at the driver level, which is far more efficient, however may not exhibit exactly the same behaviour as the previous version. To active this new engine use the following codec (or leave it blank as the codec engine is now the default):<p class="paragraph"/><div class="code"><pre>grails:
    mongodb:
        engine: codec</pre></div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item next-right"><a href="../../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Beans</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Beans/mongo.html">mongo</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Domain Classes</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/DB.html">DB</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/collection.html">collection</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/collectionName.html">collectionName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/countHits.html">countHits</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/dbo.html">dbo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findByGeoIntersects.html">findByGeoIntersects</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findByGeoWithin.html">findByGeoWithin</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findByNear.html">findByNear</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findByNearSphere.html">findByNearSphere</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findByWithinBox.html">findByWithinBox</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/findByWithinCircle.html">findByWithinCircle</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/search.html">search</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/searchTop.html">searchTop</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/useCollection.html">useCollection</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/useDatabase.html">useDatabase</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withCollection.html">withCollection</a>
                            </div>
                            
                            <div class="menu-item"><a href="../../ref/Domain%20Classes/withDatabase.html">withDatabase</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Testing</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../../ref/Testing/MongoDbTestMixin.html">MongoDbTestMixin</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
